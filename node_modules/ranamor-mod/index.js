var pool = null;

exports.connect_pool = function(sqlPool) {
	pool = sqlPool;
}

exports.config_player = function(socket) {
	var mess;
	pool.getConnection(function(err, connection) {
	// Use the connection
		if(err) {
			console.error(err);
		}
		else {
			connection.query( 'SELECT pID FROM Player ORDER BY pID DESC LIMIT 1', function(err, data) {
				 if(err) {
					console.error(err);
				 }
				 else {
					mess = "The last player id is " + data[pID];
				 }
				// And done with the connection.
				connection.release();
			// Don't use the connection here, it has been returned to the pool.
			});
		}
	});
	socket.emit('con', {message: mess});
}
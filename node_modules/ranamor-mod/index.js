var bumpers = [];

exports.config_player = function(player) {
	player.socket.on('bump', function(data) {
		var bumper = {socket: player.socket, id: data.player, frog: data.frog};
		bumpers.push(bumper);
		if( !checkBump(bumper) ) {
			setTimeout(function(){falseBumper(bumper)},1000);
		}
	});
}

function checkBump(callBumper) {
	var length = bumpers.length;
	var success = false;
	for( var i = 0; i < length; i ++ ) {
		var checkBumper = bumpers[i];
		if(checkBumper.id != callBumper.id && checkBumper.frog == callBumper.frog) {
			checkBumper.socket.emit('bumpsuccess', callBumper.id);
			callBumper.socket.emit('bumpsuccess', checkBumper.id);
			bumpers.splice(i,1);
			var callIndex = bumpers.indexOf(callBumper);
			bumpers.splice(callIndex,1);
			success = true;
			break;
		}
	}
	return success;
}
function falseBumper(lostBumper) {
	var lostIndex = bumpers.indexOf(lostBumper);
	if( lostIndex != -1 ) {
		lostBumper.socket.emit('bumpfail');
		bumpers.splice(lostIndex,1);
	}
}